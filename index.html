<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <link rel="icon" href="media/ico.ico">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
        <script src="https://betterdiscord.app/js/vendor/countUp.min.js?v=DBxeQBHNMaYkRvB8uPOLm07cbQj54TDexlykb-Dcg28"></script>
        <script src="js/leaderboard.js"></script>
        <title>Twitch Players Leaderboard</title>
    </head>

    <body>
        <h1>Twitch Players Leaderboard</h1>
        <div class="header-buttons">
            <a href="https://harmonyzt.github.io/twitchplayers.github.io/" class="main-button">To Main Page</a>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLSc9ECEzK8q-nUwmxJzUw4QZ7n8Hek9q9odRXyGSzx3fa7C-wg/viewform?usp=dialog" class="main-button" id="submitStats">Submit Your Stats</a>
            <a id="infoButton" class="main-button">How It Works</a>
        </div>
        <div id="infoModal" class="modal animate animate__animated animate__fadeIn">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>How the Ranking System Works</h2>
                <p> The ranking system is designed to provide a fair and balanced leaderboard by considering multiple factors. Here's how it works: </p>
                <h3>1. Ranking Calculation</h3>
                <p> Each player's rank is calculated using a weighted formula, meaning the higher the weight, the more it'll affect your statistics in the leaderboard: </p>
                <ul>
                    <li><strong>Kill/Death Ratio:</strong> 40% weight. This reflects combat performance.</li>
                    <li><strong>Survived/Died Ratio:</strong> 30% weight. This measures survival rate.</li>
                    <li><strong>Total Raids:</strong> 20% weight. More raids mean a higher score. A logarithmic scale is used to prevent players with very few raids from dominating.</li>
                    <li><strong>PMC Level:</strong> 10% weight. Higher-level players get a slight boost.</li>
                </ul>
                <p> Players with fewer than 20 raids receive a penalty of -15 points to their total score. </p>
                <h3>2. Skill Level</h3>
                <p> Based on the total score, players are assigned a skill level: </p>
                <ul>
                    <li><strong>L- to L+:</strong> Low skill</li>
                    <li><strong>M- to M+:</strong> Medium skill</li>
                    <li><strong>H- to H+:</strong> High skill</li>
                    <li><strong>P- to P+:</strong> Pro skill</li>
                    <li><strong>G:</strong> Godlike skill</li>
                </ul>
                <h3>3. Sorting and Display</h3>
                <p> The leaderboard can be sorted by any column (e.g., Rank, Name, KDR, SDR). Players are displayed with color-coded indicators for their statistics: </p>
                <ul>
                    <li><strong>Survived/Died Ratio:</strong> Bad (< 30%), Average (30%-54%), Good (55%-64%), Impressive (>= 65%).</li>
                    <li><strong>Kill/Death Ratio:</strong> Bad (< 5), Average (5-11.99), Good (12-14.99), Impressive (>= 15).</li>
                    <li><strong>Average Life Time:</strong> Bad (< 5 minutes), Average (5-14.99 minutes), Good (15-19.99 minutes), Impressive (>= 20 minutes).</li>
                </ul>
                <h3>4. Overall Statistics</h3>
                <p> The system also calculates overall statistics, such as: </p>
                <ul>
                    <li><strong>Total Deaths:</strong> Total number of deaths across all players.</li>
                    <li><strong>Total Deaths by Twitch Players:</strong> Deaths caused by using Twitch Players.</li>
                    <li><strong>Total Raids:</strong> Total number of raids.</li>
                    <li><strong>Total Kills:</strong> Total number of kills.</li>
                    <li><strong>Average K/D Ratio:</strong> Average Kill/Death Ratio.</li>
                    <li><strong>Average Survival Rate:</strong> Average survival rate.</li>
                </ul>
            </div>
        </div>
        <div class="stats-container">
            <h2>Overall Statistics</h2>
            <p class="update-info">Latest leaderboard update was <span id="highlight"></span></p>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalDeaths">0</div>
                    <div class="stat-label">üíÄ Total Deaths</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalDeathsFromTP">0</div>
                    <div class="stat-label">üíÄ Total Deaths by Twitch Players</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalRaids">0</div>
                    <div class="stat-label">üéÆ Total Raids</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalKills" style="font-size: 35px;">0</div>
                    <div class="stat-label">‚öîÔ∏è Total Kills</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="averageKDR">0.00</div>
                    <div class="stat-label">‚öîÔ∏è Average K/D Ratio</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="averageSurvival">0%</div>
                    <div class="stat-label">üõ°Ô∏è Average Survival Rate</div>
                </div>
            </div>
        </div>
        <div id="loadingNotification" style="display: none;">Loading Players...</div>
        <table id="leaderboardTable" class="animate animate__animated animate__fadeIn">
            <thead>
                <tr>
                    <th data-sort="rank">Rank</th>
                    <th data-sort="name">Name</th>
                    <th data-sort="lastPlayed">Last Played</th>
                    <th data-sort="pmcLevel">Level</th>
                    <th data-sort="totalRaids">Raids</th>
                    <th data-sort="survivedToDiedRatio">Survival Rate</th>
                    <th data-sort="killToDeathRatio">K/D Ratio</th>
                    <th data-sort="averageLifeTime">AVG Life Time</th>
                    <th data-sort="totalScore">Skill</th>
                    <th data-sort="usingTP">Twitch Players</th>
                    <th data-sort="sptVer">SPT Version</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </body>

</html>